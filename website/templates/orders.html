{% extends 'base.html' %}
{% block title %} Orders {% endblock %}

{% block body %}
<div class="container my-5">

    <h1 class="text-center mb-5 text-light">Your Orders</h1>

    {% if orders %}
        {% for item in orders %}
        
        <div class="card mb-4">
            <div class="card-body">
                
                <!-- ORDER HEADER -->
                <h4>Order #{{ item.order.id }}</h4>
                <p class="text-muted small">
                    Placed on: {{ item.order.date_created.strftime('%Y-%m-%d') }}
                </p>

                <!-- STATUS -->
                <p><strong>Status:</strong> {{ item.order.status }}</p>

                <!-- VIEW DETAILS BUTTON -->
                <a href="{{ url_for('views.order_details', order_id=item.order.id) }}" 
                   class="btn btn-primary btn-sm mb-3">
                    View Details
                </a>

                <hr>

                <!-- PRODUCT SECTION -->
                <div class="row mb-3">
                    <div class="col-sm-3">
                        <img src="{{ item.product.product_picture }}"
                             class="img-fluid img-thumbnail">
                    </div>

                    <div class="col-sm-9">
                        <h5>{{ item.product.product_name }}</h5>

                        <p class="text-muted small">
                            Price Each: ₱{{ '%.2f'|format(item.price_each) }}
                        </p>

                        <p class="text-muted small">
                            Quantity: {{ item.quantity }}
                        </p>

                        <p class="text-muted small">
                            Subtotal: ₱{{ '%.2f'|format(item.price_each * item.quantity) }}
                        </p>
                    </div>
                </div>

            </div>
        </div>

        {% endfor %}
    {% else %}
        <h2 class="text-center text-light">No orders found.</h2>
    {% endif %}

</div>
{% endblock %}
